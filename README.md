## 电子发票指南文件优化

本指南文件旨在提供电子发票相关字段的定义和解释，帮助用户正确生成和处理电子发票。

### 1. 发票基本信息

| 字段名 | 含义 | 备注 |
|---|---|---|
| natOp | 操作性质 | 例如：Venda de mercadoria |
| mod | 模式 | 55表示电子发票 |
| serie | 系列号 | 确保发票唯一性 |
| nNF | 发票号码 | 电子发票号码 |
| dhEmi | 开具日期时间 | 记录交易时间 |
| dhSaiEnt | 发货/收货日期时间 | 跟踪货物流动 |
| tpNF | 发票类型 | 0-entrada / 1-saída |
| idDest | 目的地类型 | 1为洲内，2为洲际 |
| cMunFG | 开票 municipality 代码 | 详见IBGE官网 |
| tpImp | 打印类型 | 默认1 |
| tpEmis | 发票发放模式 | 详见下文“发票发放模式”解释 |
| cDV | 发票号码校验码 | 用于验证发票号码完整性 |
| tpAmb | 环境类型 | 1-生产环境，2-测试环境 |
| finNFe | 发票类型 | 1-正常发票，2-补充发票，3-调整发票，4-商品退货发票 |
| indFinal | 最终消费者标志 | 0-否，1-是 |
| indPres | 现场交易标志 | 详见下文“现场交易标志”解释 |
| indIntermed | 中介运营标志 | 0-无中介运营 |
| procEmi | 发行流程 | 详见下文“发行流程”解释 |
| verProc | 平台版本 |  |

### 2. 纳税人信息

| 字段名 | 含义 | 备注 |
|---|---|---|
| CNPJ | 纳税人识别号 |  |
| xNome | 纳税人名称 |  |
| xFant | 纳税人别名 |  |
| xLgr | 公司街道名称 |  |
| nro | 公司门牌号 |  |
| xBairro | 公司街区名称 |  |
| cMun | 公司城市代码 |  |
| xMun | 公司城市名称 |  |
| UF | 州/省代码 |  |
| CEP | 邮政编码 |  |
| cPais | 国家代码 | 详见BCB官网 |
| xPais | 国家名称 |  |
| fone | 联系电话 |  |
| IE | 州注册号 |  |
| IM | 市注册号 |  |
| CNAE | 行业代码 |  |
| CRT | 税收制度 | 详见下文“税收制度”解释 |

### 3. 购买方信息

| 字段名 | 含义 | 备注 |
|---|---|---|
| CNPJ | 购买方识别号 |  |
| xNome | 购买方名称 |  |
| xLgr | 购买方街道名称 |  |
| nro | 购买方门牌号 |  |
| xBairro | 购买方街区名称 |  |
| cMun | 购买方城市代码 |  |
| xMun | 购买方城市名称 |  |
| UF | 州/省代码 |  |
| CEP | 邮政编码 |  |
| cPais | 国家代码 | 详见BCB官网 |
| xPais | 国家名称 |  |
| fone | 联系电话 |  |
| indIEDest | 外国企业标志 | 详见下文“外国企业标志”解释 |
| IE | 州注册号 |  |

### 4. 商品信息

| 字段名 | 含义 | 备注 |
|---|---|---|
| cProd | 商品代码 |  |
| cEAN | 商品条码 |  |
| xProd | 商品名称 |  |
| NCM | 商品海关编码 |  |
| CFOP | 商品税务编码 | 详见CFOP手册 |
| uCom | 商品单位 |  |
| qCom | 商品数量 |  |
| vUnCom | 商品单价 |  |
| vProd | 商品总价 |  |
| cEANTrib | 商品GTIN代码 |  |
| uTrib | 税务计算单位 |  |
| qTrib | 税务计算数量 |  |
| vUnTrib | 税务计算单价 |  |
| vFrete | 运费 |  |
| indTot | 总价包含标志 | 1-包含 |
| orig | 商品原产地 | 详见下文“原产地标志”解释 |
| modBC | 税基计算方式 | 详见下文“税基计算方式”解释 |
| vBC | 税基金额 |  |
| pICMS | ICMS税率 |  |
| vICMS | ICMS税额 |  |
| vBC | PIS税基金额 |  |
| pPIS | PIS税率 |  |
| vPIS | PIS税额 |  |
| vBC | COFINS税基金额 |  |
| pCOFINS | COFINS税率 |  |
| vCOFINS | COFINS税额 |  |
| infAdProd | 商品额外信息 |  |

### 5. 税务信息

| 字段名 | 含义 | 备注 |
|---|---|---|
| vBC | 税基金额 |  |
| vICMS | ICMS税额 |  |
| vICMSDeson | 免税额 |  |
| vProd | 商品总价 |  |
| vFrete | 运费 |  |
| vSeg | 保险费 |  |
| vDesc | 折扣 |  |
| vII | 进口税 |  |
| vIPI | IPI税额 |  |
| vIPIDevol | IPI退款 |  |
| vPIS | PIS税额 |  |
| vCOFINS | COFINS税额 |  |
| vOutro | 其他税额 |  |
| vNF | 发票总价 |  |
| vTotTrib | 总税额 |  |

### 6. 运输信息

| 字段名 | 含义 | 备注 |
|---|---|---|
| modFrete | 运输方式 | 详见下文“运输方式”解释 |
| pesoL | 净重 |  |
| pesoB | 毛重 |  |

### 7. 付款信息

| 字段名 | 含义 | 备注 |
|---|---|---|
| nFat | 付款号码 |  |
| vOrig | 付款金额 |  |
| vDesc | 折扣 |  |
| vLiq | 付款净价 |  |
| nDup | 付款次数 |  |
| dVenc | 付款日期 |  |
| vDup | 付款金额 |  |
| tPag | 支付方式 | 详见下文“支付方式”解释 |
| vPag | 付款金额 |  |

### 8. 技术支持信息

| 字段名 | 含义 | 备注 |
|---|---|---|
| CNPJ | 技术支持公司识别号 |  |
| xContato | 技术支持联系人 |  |
| fone | 技术支持电话 |  |

### 9. 签名信息

| 字段名 | 含义 | 备注 |
|---|---|---|
| DigestValue | 摘要值 |  |
| SignatureValue | 签名值 |  |

### 10. 协议信息

| 字段名 | 含义 | 备注 |
|---|---|---|
| tpAmb | 环境类型 | 1-生产环境，2-测试环境 |
| verAplic | 协议版本 |  |
| chNFe | 协议编号 |  |
| dhRecbto | 接收时间 |  |
| nProt | 协议编号 |  |
| digVal | 摘要值 |  |
| cStat | 状态码 |  |
| xMotivo | 状态信息 |  |

## 附录

### 发票发放模式

| 代码 | 含义 |
|---|---|
| 1 | 正常发放 (非应急模式) |
| 2 | 应急 FS-IA 模式 |
| 3 | 应急 SCAN 模式 |
| 4 | 应急 DPEC 模式 |
| 5 | 应急 FS-DA 模式 |
| 6 | 应急 SVC-AN 模式 |
| 7 | 应急 SVC-RS 模式 |

### 现场交易标志

| 代码 | 含义 |
|---|---|
| 0 | 不适用 |
| 1 | 现场交易 |
| 2 | 非现场交易，通过互联网 |
| 3 | 非现场交易，通过电话服务 |
| 4 | NFC-e 在送货上门的情况下 |
| 9 | 非现场交易，其他方式 |

### 发行流程

| 代码 | 含义 |
|---|---|
| 0 | 纳税人使用其应用程序发放 |
| 1 | 税务机关发放的临时电子发票 |
| 2 | 纳税人使用其数字证书通过税务机关网站发放的临时电子发票 |
| 3 | 纳税人使用税务机关提供的应用程序发放 |

### 税收制度

| 代码 | 含义 |
|---|---|
| 1 | 简易税制（Simples Nacional） |
| 2 | 简易税制，超出收入上限 |
| 3 | 普通税制（Regime Normal） |
| 4 | 个体微型企业（Microempreendedor Individual，MEI） |

### 外国企业标志

| 代码 | 含义 |
|---|---|
| 1 | 需要提供外国企业信息 |
| 2 | 不需要提供外国企业信息 |
| 3 | 需要提供外国企业信息，但未提供 |
| 4 | 不需要提供外国企业信息，但未提供 |

### 原产地标志

| 代码 | 含义 |
|---|---|
| 0 | 国产 |
| 1 | 进口 |
| 2 | 国产，含进口成分 |
| 3 | 国产，含进口成分超过40% |
| 4 | 国产，符合基本生产流程 |
| 5 | 国产，含进口成分不超过40% |
| 6 | 进口，无同类国产 |
| 7 | 国产，含进口成分超过70% |

### 税基计算方式

| 代码 | 含义 |
|---|---|
| 0 | 价值 |
| 1 | 税基 |
| 2 | 数量 |
| 3 | 价值 |
| 4 | 税基 |

### 运输方式

| 代码 | 含义 |
|---|---|
| 0 | 发货人承担运费 |
| 1 | 收货人承担运费 |
| 2 | 第三方承担运费 |
| 9 | 无运费 |

### 支付方式

| 代码 | 含义 |
|---|---|
| 01 | 现金 |
| 02 | 支票 |
| 03 | 信用卡 |
| 04 | 借记卡 |
| 05 | 商店信用 |
| 10 | 食品券 |
| 11 | 餐饮券 |
| 12 | 礼品卡 |
| 13 | 燃料券 |
| 99 | 其他 |

## 参考资料

* CFOP手册：https://www.gov.br/receitafederal/pt-br/acesso-a-informacao/acoes-e-programas/facilitacao/anexo-ecf-cfop
* IBGE municipality code：https://www.ibge.gov.br/explica/codigos-dos-municipios.php
* BCB country code：https://www.bcb.gov.br/rex/Censo2000/port/Manual/Pais.asp?frame=1

请注意，以上内容仅供参考，具体定义和使用请以相关法律法规和标准为准。
