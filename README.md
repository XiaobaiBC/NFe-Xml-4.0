## 电子发票指南文件优化

本指南文件旨在提供电子发票相关字段的定义和解释，帮助用户正确生成和处理电子发票。

### 1. 发票基本信息

| 字段名 | 含义 | 备注 |
|---|---|---|
| natOp | 操作性质 | 例如：Venda de mercadoria |
| mod | 模式 | 55表示电子发票 |
| serie | 系列号 | 发票的系列号，用于组织和管理目的，确保发票的唯一性。 |
| nNF | 发票号码 | 电子发票号码 |
| dhEmi | 开具日期时间 | 记录交易时间 |
| dhSaiEnt | 发货日期时间 | 跟踪货物流动 |
| tpNF | 发票类型 | 0-entrada / 1-saída |
| idDest | 目的地类型 | 1为洲内，2为洲际 |
| cMunFG | 开票 municipality 代码 | [详见IBGE官网](https://www.ibge.gov.br/explica/codigos-dos-municipios.php)。 |
| tpImp | 打印类型 | 默认1 |
| tpEmis | 发票发放模式 | 详见下文“<strong>发票发放模式</strong>”解释 |
| cDV | 发票号码校验码 | 用于验证发票号码完整性 |
| tpAmb | 环境类型 | 1 = 生产环境（正式使用）；2 = 测试环境（验证/认证用途）。 |
| finNFe | 发票类型 | 1-正常发票，2-补充发票，3-调整发票，4-商品退货发票 |
| indFinal | 最终消费者标志 | 0-否，1-是 |
| indPres | 现场交易标志 | 详见下文“<strong>现场交易标志</strong>”解释 |
| indIntermed | 中介运营标志 | 0-无中介运营 |
| procEmi | 发行流程 | 详见下文“发行流程”解释 |
| verProc | 平台版本 |  |

### 2. 纳税人信息

| 字段名 | 含义 | 备注 |
|---|---|---|
| CNPJ | 纳税人识别号 | Ex:46.377.222/0001-29 |
| xNome | 纳税人名称 | Ex:Secretaria da Fazenda e Planejamento |
| xFant | 纳税人别名 | Ex:SECRETARIA DA FAZENDA |
| xLgr | 公司街道名称 | Ex:Avenida Rangel Pestana |
| nro | 公司门牌号 | Ex:300 |
| xBairro | 公司街区名称 | Ex:Se |
| cMun | 公司市政代码 [详见IBGE 市政代码](https://www.ibge.gov.br/explica/codigos-dos-municipios.php)| Ex:3550308 |
| xMun | 公司城市名称 | Ex:São Paulo |
| UF | 州/省代码 | Ex:SP |
| CEP | 邮政编码 | Ex:01017-000 |
| cPais | 国家代码 | 详见BCB官网 (https://www.barueri.sp.gov.br/nfe/Manuais/RPS_TabelaPaises.pdf)|
| xPais | 国家名称 | Ex:Brasil |
| fone | 联系电话 | Ex:(11) 3243-3285 |
| IE | 州注册号 | |
| IM | 市注册号 |  |
| CNAE | 行业代码 | Ex: |
| CRT | 税收制度 | 详见下文“税收制度”解释 |

### 3. 购买方信息

| 字段名 | 含义 | 备注 |
|---|---|---|
| CNPJ | 购买方识别号 |  |
| xNome | 购买方名称 |  |
| xLgr | 购买方街道名称 |  |
| nro | 购买方门牌号 |  |
| xBairro | 购买方街区名称 |  |
| cMun | 购买方城市代码 |  |
| xMun | 购买方城市名称 |  |
| UF | 州/省代码 |  |
| CEP | 邮政编码 |  |
| cPais | 国家代码 | 详见BCB官网 |
| xPais | 国家名称 |  |
| fone | 联系电话 |  |
| indIEDest | 外国企业标志 | 详见下文“外国企业标志”解释 |
| IE | 州注册号 |  |

### 4. 商品信息

| 字段名 | 含义 | 备注 |
|---|---|---|
| cProd | 商品代码 |  |
| cEAN | 商品条码 |  |
| xProd | 商品名称 |  |
| NCM | 商品海关编码 |  |
| CFOP | 商品税务编码 | 详见CFOP手册 |
| uCom | 商品单位 |  |
| qCom | 商品数量 |  |
| vUnCom | 商品单价 |  |
| vProd | 商品总价 |  |
| cEANTrib | 商品GTIN代码 |  |
| uTrib | 税务计算单位 |  |
| qTrib | 税务计算数量 |  |
| vUnTrib | 税务计算单价 |  |
| vFrete | 运费 |  |
| indTot | 总价包含标志 | 1-包含 |
| orig | 商品原产地 | 详见下文“原产地标志”解释 |
| modBC | 税基计算方式 | 详见下文“税基计算方式”解释 |
| vBC | 税基金额 |  |
| pICMS | ICMS税率 |  |
| vICMS | ICMS税额 |  |
| vBC | PIS税基金额 |  |
| pPIS | PIS税率 |  |
| vPIS | PIS税额 |  |
| vBC | COFINS税基金额 |  |
| pCOFINS | COFINS税率 |  |
| vCOFINS | COFINS税额 |  |
| infAdProd | 商品额外信息 |  |

### 5. 税务信息

| 字段名 | 含义 | 备注 |
|---|---|---|
| vBC | 税基金额 |  |
| vICMS | ICMS税额 |  |
| vICMSDeson | 免税额 |  |
| vProd | 商品总价 |  |
| vFrete | 运费 |  |
| vSeg | 保险费 |  |
| vDesc | 折扣 |  |
| vII | 进口税 |  |
| vIPI | IPI税额 |  |
| vIPIDevol | IPI退款 |  |
| vPIS | PIS税额 |  |
| vCOFINS | COFINS税额 |  |
| vOutro | 其他税额 |  |
| vNF | 发票总价 |  |
| vTotTrib | 总税额 |  |

### 6. 运输信息

| 字段名 | 含义 | 备注 |
|---|---|---|
| modFrete | 运输方式 | 详见下文“运输方式”解释 |
| pesoL | 净重 |  |
| pesoB | 毛重 |  |

### 7. 付款信息

| 字段名 | 含义 | 备注 |
|---|---|---|
| nFat | 付款号码 |  |
| vOrig | 付款金额 |  |
| vDesc | 折扣 |  |
| vLiq | 付款净价 |  |
| nDup | 付款次数 |  |
| dVenc | 付款日期 |  |
| vDup | 付款金额 |  |
| tPag | 支付方式 | 详见下文“支付方式”解释 |
| vPag | 付款金额 |  |

### 8. 技术支持信息

| 字段名 | 含义 | 备注 |
|---|---|---|
| CNPJ | 技术支持公司识别号 |  |
| xContato | 技术支持联系人 |  |
| fone | 技术支持电话 |  |

### 9. 签名信息

| 字段名 | 含义 | 备注 |
|---|---|---|
| DigestValue | 摘要值 |  |
| SignatureValue | 签名值 |  |

### 10. 协议信息

| 字段名 | 含义 | 备注 |
|---|---|---|
| tpAmb | 环境类型 | 1-生产环境，2-测试环境 |
| verAplic | 协议版本 |  |
| chNFe | 协议编号 |  |
| dhRecbto | 接收时间 |  |
| nProt | 协议编号 |  |
| digVal | 摘要值 |  |
| cStat | 状态码 |  |
| xMotivo | 状态信息 |  |

## 附录

### 发票发放模式

| 字段名 | 含义 | 备注 |
|---|---|---|
| 1 | 正常发放 (非应急模式) |  表示正常情况下的电子发票发放，不涉及任何应急或备用系统。 |
| 2 | 应急 FS-IA 模式 |  使用安全表单打印 DANFE 在这种情况下，DANFE（电子发票辅助文件，用于代表 NF-e 的纸质文件）会打印在安全表单上。|
| 3 | 应急 SCAN 模式（国家环境应急系统） | 使用 SCAN 系统发放发票，这是国家环境应急系统的一部分，在特定情况下启用。 |
| 4 | 应急 DPEC 模式（预先声明的应急发放） | 在发票正式发放之前，以预先声明的形式提交数据。适用于没有即时在线传输能力的场景。  |
| 5 | 应急 FS-DA 模式    | 使用安全表单打印 DANFE 类似于代码 2 的模式，但使用的是另一种安全表单类型 (FS-DA)。  |
| 6 | 应急 SVC-AN 模式（国家应急虚拟 SEFAZ 系统） | 通过 SEFAZ（州财政秘书处）的虚拟应急系统 AN（国家环境）处理电子发票。 |
| 7 | 应急 SVC-RS 模式（RS 州的虚拟应急 SEFAZ 系统） | 通过 SEFAZ 的虚拟应急系统 RS（南里奥格兰德州）处理电子发票。 |


### 现场交易标志

| 代码 | 含义 |
|---|---|
| 0 | 不适用 |
| 1 | 现场交易 |
| 2 | 非现场交易，通过互联网 |
| 3 | 非现场交易，通过电话服务 |
| 4 | NFC-e 在送货上门的情况下 |
| 9 | 非现场交易，其他方式 |

### 发行流程

| 代码 | 含义 |
|---|---|
| 0 | 纳税人使用其应用程序发放 |
| 1 | 税务机关发放的临时电子发票 |
| 2 | 纳税人使用其数字证书通过税务机关网站发放的临时电子发票 |
| 3 | 纳税人使用税务机关提供的应用程序发放 |

### 税收制度

| 代码 | 含义 |
|---|---|
| 1 | 简易税制（Simples Nacional） |
| 2 | 简易税制，超出收入上限 |
| 3 | 普通税制（Regime Normal） |
| 4 | 个体微型企业（Microempreendedor Individual，MEI） |

### 外国企业标志

| 代码 | 含义 |
|---|---|
| 1 | 需要提供外国企业信息 |
| 2 | 不需要提供外国企业信息 |
| 3 | 需要提供外国企业信息，但未提供 |
| 4 | 不需要提供外国企业信息，但未提供 |

### 原产地标志

| 代码 | 含义 |
|---|---|
| 0 | 国产 |
| 1 | 进口 |
| 2 | 国产，含进口成分 |
| 3 | 国产，含进口成分超过40% |
| 4 | 国产，符合基本生产流程 |
| 5 | 国产，含进口成分不超过40% |
| 6 | 进口，无同类国产 |
| 7 | 国产，含进口成分超过70% |

### 税基计算方式

| 代码 | 含义 |
|---|---|
| 0 | 价值 |
| 1 | 税基 |
| 2 | 数量 |
| 3 | 价值 |
| 4 | 税基 |

### 运输方式

| 代码 | 含义 |
|---|---|
| 0 | 发货人承担运费 |
| 1 | 收货人承担运费 |
| 2 | 第三方承担运费 |
| 9 | 无运费 |

### 支付方式

| 代码 | 含义           | 描述                                                                                     |
|-------|----------------|------------------------------------------------------------------------------------------|
| 01    | Dinheiro 现金    | 支付方式为现金。这意味着交易是通过现金支付完成的。                                                  |
| 02    | Cheque 支票     | 支付方式为支票。客户使用支票进行支付。                                                            |
| 03    | Cartão de Crédito 信用卡 | 支付方式为信用卡。客户通过信用卡支付货款。                                                       |
| 04    | Cartão de Débito 借记卡 | 支付方式为借记卡。客户使用借记卡直接从银行账户中扣除资金支付。                                           |
| 05    | Crédito Loja 商店信用 | 支付方式为商店提供的信用支付。这通常指商店自己提供的分期付款或信贷服务，客户可以在商店的信用账户上付款。                 |
| 10    | Vale Alimentação 食品券 | 支付方式为食品券（通常是由雇主提供，用于购买食品）。这类支付方式通常用于雇员福利或补贴。                                   |
| 11    | Vale Refeição 餐饮券   | 支付方式为餐饮券（通常由雇主提供，用于支付餐费）。这类支付方式常见于员工福利，允许员工在特定地点用券支付餐费。                   |
| 12    | Vale Presente 礼品卡   | 支付方式为礼品卡（通常是预付卡）。客户使用商店或品牌的礼品卡进行支付，通常是为了购买商品或服务。                             |
| 13    | Vale Combustível 燃料券 | 支付方式为燃料券（通常用于支付加油）。这种券通常由油站或公司提供，允许客户购买燃料。                                         |
| 99    | Outros 其他      | 此选项表示使用了未在上述选项中列出的支付方式。可以用于各种特殊支付方式，如银行转账、数字钱包等。                                |
