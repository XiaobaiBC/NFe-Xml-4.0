[XML标签字典](#XML标签字典)<br> 
[发票发放模式](###发票发放模式)<br> 
[现场交易标志](###现场交易标志)<br> 
[发行流程](###发行流程)<br> 
[税收制度](###税收制度)<br> 
[外国企业标志](###外国企业标志)<br> 
[原产地标志](###原产地标志)<br> 
[税基计算方式](###税基计算方式)<br> 
[运输方式](###运输方式)<br> 
[支付方式](###支付方式)<br> 


### XML 电子发票 (NF-e)：IT部门的利器与优势解析

随着商业数字化的加速发展，**XML 电子发票 (NF-e)** 已成为企业必不可少的税务管理工具。它不仅简化了财务流程，还为企业的 IT 部门带来了诸多技术性优势。本文将深入探讨 XML 格式如何助力 IT 部门提升效率、优化系统集成以及强化数据管理。

#### 什么是 XML 电子发票？

XML（eXtensible Markup Language，扩展标记语言）是一种通用的数据存储和传输格式，用于组织和描述结构化信息。在电子发票领域，XML 是 NF-e 的官方格式，用于记录和传递交易数据，具备高度的可扩展性和兼容性。

当企业进行销售时，交易信息会被记录为 XML 文件，并通过网络发送到税务部门进行验证。验证通过后，该文件即成为具有法律效力的电子发票。

#### XML 格式为 IT 部门带来的核心优势

1. **数据的可移植性与标准化**  
   XML 格式的结构化特点使得数据能够在不同平台和系统之间无缝传输。无论是企业内部的 ERP 系统，还是外部的税务机关平台，都可以轻松读取和处理 XML 数据。这种标准化降低了系统集成的复杂性，方便 IT 部门设计跨系统的解决方案。

   **实例**：一个企业的销售系统可以自动生成 XML 发票，并实时与财务系统同步数据，无需手动输入，从而减少出错率。

2. **易于集成的生态系统**  
   XML 的通用性让 IT 部门能够轻松集成各种软件工具。例如，企业可以将发票生成模块与客户管理系统（CRM）、企业资源计划（ERP）或库存管理系统连接，实现自动化的数据流通。

   **好处**：
   - 减少重复劳动，提高工作效率。
   - 让企业各部门实时共享关键业务数据，提升决策速度。

3. **高效的数据存储与查询**  
   XML 格式适合存储大规模数据，并支持快速检索。IT 部门可以利用数据库或云平台存储 XML 文件，同时通过索引和查询工具快速提取特定信息。

   **应用场景**：
   - 当税务部门要求审查某笔交易时，IT 系统可以迅速定位相关 XML 文件并导出。
   - 企业可以生成定制化的发票报告，帮助管理层分析运营状况。

4. **灵活性与可扩展性**  
   XML 格式具备高度的可扩展性，能够根据政策变化和业务需求快速调整。例如，当巴西在 2018 年升级 NF-e 到 4.0 版本时，企业的 IT 部门只需调整 XML 模板，即可实现对新格式的兼容。

   **优势**：
   - 避免频繁更换系统，大幅降低升级成本。
   - 快速响应市场和法规变化，确保业务连续性。

5. **数据安全性与合规性**  
   XML 文件通过数字签名和加密技术保证数据的真实性和完整性。对 IT 部门而言，这不仅提高了数据安全性，还简化了合规流程。

   **实际效果**：
   - 减少因数据丢失或篡改导致的法律风险。
   - 配合审计与税务检查，快速提供完整的交易记录。

6. **自动化工作流支持**  
   IT 部门可以基于 XML 格式构建自动化工作流。例如，在发票生成后，系统可以自动发送 XML 文件至客户邮箱、上传至云存储，并同步至财务和税务系统。

   **结果**：
   - 显著减少手动操作，提高效率。
   - 确保发票分发和保存的时效性。

#### IT 部门在 XML 管理中的角色

为充分发挥 XML 的优势，IT 部门需要在以下几方面发挥作用：
- **系统架构设计**：构建支持 XML 发票生成、存储、传输和查询的系统框架。
- **数据存储与备份**：使用云存储或分布式数据库确保 XML 文件的安全存储，并定期备份以防止数据丢失。
- **自动化工具开发**：设计和部署自动化工具，如批量下载、格式转换和数据报告生成。
- **安全监控与合规支持**：配置数字证书和加密机制，确保所有 XML 文件符合税务法规要求。

#### XML 电子发票的未来趋势

随着人工智能和大数据技术的普及，XML 文件将成为支持企业智能化运营的关键数据来源。以下是 IT 部门可以探索的未来方向：
- **数据分析与优化**：基于 XML 数据构建预测模型，优化库存管理和销售策略。
- **智能化集成**：通过 API 技术，实现 XML 文件与更多外部平台的实时对接。
- **区块链应用**：利用区块链技术存储和验证 XML 发票，进一步提升数据透明性和安全性。

#### 结语

XML 电子发票不仅是税务合规的重要工具，更为 IT 部门带来了诸多技术性好处。它的标准化、可扩展性和安全性为企业搭建高效的数据生态系统提供了坚实的基础。通过充分利用 XML 格式，IT 部门可以帮助企业实现流程自动化、数据智能化和运营现代化，全面提升竞争力。



# XML标签字典

### XML基础标签解析

| 字段名 | 含义 | 备注 |
|---|---|---|
| `natOp` | 操作性质 | 例如：Venda de mercadoria |
| `mod` | 模式 | 55表示电子发票 |
| `serie` | 系列号 | 发票的系列号，用于组织和管理目的，确保发票的唯一性。 |
| `nNF` | 发票号码 | 电子发票号码 |
| `dhEmi` | 开具日期时间 | 记录交易时间 |
| `dhSaiEnt` | 发货日期时间 | 跟踪货物流动 |
| `tpNF` | 发票类型 | 0-entrada / 1-saída |
| `idDest` | 目的地类型 | 1为洲内，2为洲际 |
| `cMunFG` | 开票 municipality 代码 | [详见IBGE官网](https://www.ibge.gov.br/explica/codigos-dos-municipios.php)。 |
| `tpImp` | 打印类型 | 默认1 |
| `tpEmis` | 发票发放模式 | 详见下文“[发票发放模式](###发票发放模式)”解释 |
| `cDV` | 发票号码校验码 | 用于验证发票号码完整性 |
| `tpAmb` | 环境类型 | 1 = 生产环境（正式使用）；2 = 测试环境（验证/认证用途）。 |
| `finNFe` | 发票类型 | 1-正常发票，2-补充发票，3-调整发票，4-商品退货发票 |
| `indFinal` | 最终消费者标志 | 0-否，1-是 |
| `indPres` | 现场交易标志 | 详见下文“[现场交易标志](###现场交易标志)”解释 |
| `indIntermed` | 中介运营标志 | 0-无中介运营 |
| `procEmi` | 发行流程 | 详见下文“[发行流程](###发行流程)”解释 |
| `verProc` | 平台版本 |  |

### XML纳税人标签解析

| 字段名 | 含义 | 备注 |
|---|---|---|
| `CNPJ` | 纳税人识别号 | Ex:46.377.222/0001-29 |
| `xNome` | 纳税人名称 | Ex:Secretaria da Fazenda e Planejamento |
| `xFant` | 纳税人别名 | Ex:SECRETARIA DA FAZENDA |
| `xLgr` | 公司街道名称 | Ex:Avenida Rangel Pestana |
| `nro` | 公司门牌号 | Ex:300 |
| `xBairro` | 公司街区名称 | Ex:Se |
| `cMun` | 公司市政代码 [详见IBGE 市政代码](https://www.ibge.gov.br/explica/codigos-dos-municipios.php)| Ex:3550308 |
| `xMun` | 公司城市名称 | Ex:São Paulo |
| `UF` | 州/省代码 | Ex:SP |
| `CEP` | 邮政编码 | Ex:01017-000 |
| `cPais` | 国家代码 | [详见BCB官网](https://www.barueri.sp.gov.br/nfe/Manuais/RPS_TabelaPaises.pdf)|
| `xPais` | 国家名称 | Ex:Brasil |
| `fone` | 联系电话 | Ex:(11) 3243-3285 |
| `IE` | 州注册号 | |
| `IM` | 市注册号 |  |
| `CNAE` | 行业代码 | Ex: |
| `CRT` | 税收制度 | 详见下文“税收制度”解释 |

### XML购买方标签解析

| 字段名 | 含义 | 备注 |
|---|---|---|
| `CNPJ` | 购买方识别号 |  |
| `xNome` | 购买方名称 |  |
| `xLgr` | 购买方街道名称 |  |
| `nro` | 购买方门牌号 |  |
| `xBairro` | 购买方街区名称 |  |
| `cMun` | 购买方城市代码 |  |
| `xMun` | 购买方城市名称 |  |
| `UF` | 州/省代码 |  |
| `CEP` | 邮政编码 |  |
| `cPais` | 国家代码 | 详见BCB官网 |
| `xPais` | 国家名称 |  |
| `fone` | 联系电话 |  |
| `indIEDest` | 外国企业标志 | 详见下文“外国企业标志”解释 |
| `IE` | 州注册号 |  |

### XM销售产品标签解析

| 字段名 | 含义 | 备注 |
|---|---|---|
| `cProd` | 商品代码 |  |
| `cEAN` | 商品条码 |  |
| `xProd` | 商品名称 |  |
| `NCM` | 商品海关编码 |  |
| `CFOP` | 商品税务编码 | 详见CFOP手册 |
| `uCom` | 商品单位 |  |
| `qCom` | 商品数量 |  |
| `vUnCom` | 商品单价 |  |
| `vProd` | 商品总价 |  |
| `cEANTrib` | 商品GTIN代码 |  |
| `uTrib` | 税务计算单位 |  |
| `qTrib` | 税务计算数量 |  |
| `vUnTrib` | 税务计算单价 |  |
| `vFrete` | 运费 |  |
| `indTot` | 总价包含标志 | 1-包含 |
| `orig` | 商品原产地 | 详见下文“原产地标志”解释 |
| `modBC` | 税基计算方式 | 详见下文“税基计算方式”解释 |
| `vBC` | 税基金额 |  |
| `pICMS` | ICMS税率 |  |
| `vICMS` | ICMS税额 |  |
| `vBC` | PIS税基金额 |  |
| `pPIS` | PIS税率 |  |
| `vPIS` | PIS税额 |  |
| `vBC` | COFINS税基金额 |  |
| `pCOFINS` | COFINS税率 |  |
| `vCOFINS` | COFINS税额 |  |
| `infAdProd` | 商品额外信息 |  |

### XML税务标签解析

| 字段名 | 含义 | 备注 |
|---|---|---|
| `vBC` | 税基金额 |  |
| `vICMS` | ICMS税额 |  |
| `vICMSDeson` | 免税额 |  |
| `vProd` | 商品总价 |  |
| `vFrete` | 运费 |  |
| `vSeg` | 保险费 |  |
| `vDesc` | 折扣 |  |
| `vII` | 进口税 |  |
| `vIPI` | IPI税额 |  |
| `vIPIDevol` | IPI退款 |  |
| `vPIS` | PIS税额 |  |
| `vCOFINS` | COFINS税额 |  |
| `vOutro` | 其他税额 |  |
| `vNF` | 发票总价 |  |
| `vTotTrib` | 总税额 |  |

### XML运输标签解析

| 字段名 | 含义 | 备注 |
|---|---|---|
| `modFrete` | 运输方式 | 详见下文“运输方式”解释 |
| `pesoL` | 净重 |  |
| `pesoB` | 毛重 |  |

### XML付款标签解析

| 字段名 | 含义 | 备注 |
|---|---|---|
| `nFat` | 付款号码 |  |
| `vOrig` | 付款金额 |  |
| `vDesc` | 折扣 |  |
| `vLiq` | 付款净价 |  |
| `nDup` | 付款次数 |  |
| `dVenc` | 付款日期 |  |
| `vDup` | 付款金额 |  |
| `tPag` | 支付方式 | 详见下文“支付方式”解释 |
| `vPag` | 付款金额 |  |

### XML技术支持信息

| 字段名 | 含义 | 备注 |
|---|---|---|
| `CNPJ` | 技术支持公司识别号 |  |
| `xContato` | 技术支持联系人 |  |
| `fone` | 技术支持电话 |  |

### 签名信息

| 字段名 | 含义 | 备注 |
|---|---|---|
| `DigestValue` | 摘要值 |  |
| `SignatureValue` | 签名值 |  |

### 协议信息

| 字段名 | 含义 | 备注 |
|---|---|---|
| `tpAmb` | 环境类型 | 1-生产环境，2-测试环境 |
| `verAplic` | 协议版本 |  |
| `chNFe` | 协议编号 |  |
| `dhRecbto` | 接收时间 |  |
| `nProt` | 协议编号 |  |
| `digVal` | 摘要值 |  |
| `cStat` | 状态码 |  |
| `xMotivo` | 状态信息 |  |

## 附录

### 发票发放模式

| 字段名 | 含义 | 备注 |
|---|---|---|
| 1 | 正常发放 (非应急模式) |  表示正常情况下的电子发票发放，不涉及任何应急或备用系统。 |
| 2 | 应急 FS-IA 模式 |  使用安全表单打印 DANFE 在这种情况下，DANFE（电子发票辅助文件，用于代表 NF-e 的纸质文件）会打印在安全表单上。|
| 3 | 应急 SCAN 模式（国家环境应急系统） | 使用 SCAN 系统发放发票，这是国家环境应急系统的一部分，在特定情况下启用。 |
| 4 | 应急 DPEC 模式（预先声明的应急发放） | 在发票正式发放之前，以预先声明的形式提交数据。适用于没有即时在线传输能力的场景。  |
| 5 | 应急 FS-DA 模式    | 使用安全表单打印 DANFE 类似于代码 2 的模式，但使用的是另一种安全表单类型 (FS-DA)。  |
| 6 | 应急 SVC-AN 模式（国家应急虚拟 SEFAZ 系统） | 通过 SEFAZ（州财政秘书处）的虚拟应急系统 AN（国家环境）处理电子发票。 |
| 7 | 应急 SVC-RS 模式（RS 州的虚拟应急 SEFAZ 系统） | 通过 SEFAZ 的虚拟应急系统 RS（南里奥格兰德州）处理电子发票。 |


### 现场交易标志

| 代码 | 含义 |
|---|---|
| 0 | 不适用 |
| 1 | 现场交易 |
| 2 | 非现场交易，通过互联网 |
| 3 | 非现场交易，通过电话服务 |
| 4 | NFC-e 在送货上门的情况下 |
| 9 | 非现场交易，其他方式 |

### 发行流程

| 代码 | 含义 |
|---|---|
| 0 | 纳税人使用其应用程序发放 |
| 1 | 税务机关发放的临时电子发票 |
| 2 | 纳税人使用其数字证书通过税务机关网站发放的临时电子发票 |
| 3 | 纳税人使用税务机关提供的应用程序发放 |

### 税收制度

| 代码 | 含义 |
|---|---|
| 1 | 简易税制（Simples Nacional） |
| 2 | 简易税制，超出收入上限 |
| 3 | 普通税制（Regime Normal） |
| 4 | 个体微型企业（Microempreendedor Individual，MEI） |

### 外国企业标志

| 代码 | 含义 |
|---|---|
| 1 | 需要提供外国企业信息 |
| 2 | 不需要提供外国企业信息 |
| 3 | 需要提供外国企业信息，但未提供 |
| 4 | 不需要提供外国企业信息，但未提供 |

### 原产地标志

| 代码 | 含义 |
|---|---|
| 0 | 国产 |
| 1 | 进口 |
| 2 | 国产，含进口成分 |
| 3 | 国产，含进口成分超过40% |
| 4 | 国产，符合基本生产流程 |
| 5 | 国产，含进口成分不超过40% |
| 6 | 进口，无同类国产 |
| 7 | 国产，含进口成分超过70% |

### 税基计算方式

| 代码 | 含义 |
|---|---|
| 0 | 价值 |
| 1 | 税基 |
| 2 | 数量 |
| 3 | 价值 |
| 4 | 税基 |

### 运输方式

| 代码 | 含义 |
|---|---|
| 0 | 发货人承担运费 |
| 1 | 收货人承担运费 |
| 2 | 第三方承担运费 |
| 9 | 无运费 |

### 支付方式

| 代码 | 含义           | 描述                                                                                     |
|-------|----------------|------------------------------------------------------------------------------------------|
| 01    | Dinheiro 现金    | 支付方式为现金。这意味着交易是通过现金支付完成的。                                                  |
| 02    | Cheque 支票     | 支付方式为支票。客户使用支票进行支付。                                                            |
| 03    | Cartão de Crédito 信用卡 | 支付方式为信用卡。客户通过信用卡支付货款。                                                       |
| 04    | Cartão de Débito 借记卡 | 支付方式为借记卡。客户使用借记卡直接从银行账户中扣除资金支付。                                           |
| 05    | Crédito Loja 商店信用 | 支付方式为商店提供的信用支付。这通常指商店自己提供的分期付款或信贷服务，客户可以在商店的信用账户上付款。                 |
| 10    | Vale Alimentação 食品券 | 支付方式为食品券（通常是由雇主提供，用于购买食品）。这类支付方式通常用于雇员福利或补贴。                                   |
| 11    | Vale Refeição 餐饮券   | 支付方式为餐饮券（通常由雇主提供，用于支付餐费）。这类支付方式常见于员工福利，允许员工在特定地点用券支付餐费。                   |
| 12    | Vale Presente 礼品卡   | 支付方式为礼品卡（通常是预付卡）。客户使用商店或品牌的礼品卡进行支付，通常是为了购买商品或服务。                             |
| 13    | Vale Combustível 燃料券 | 支付方式为燃料券（通常用于支付加油）。这种券通常由油站或公司提供，允许客户购买燃料。                                         |
| 99    | Outros 其他      | 此选项表示使用了未在上述选项中列出的支付方式。可以用于各种特殊支付方式，如银行转账、数字钱包等。                                |
